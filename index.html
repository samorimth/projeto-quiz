<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Quiz Interativo: Efici√™ncia Energ√©tica</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* --- Estilo Base e Fundo (Kahoot! Dark Vibe) --- */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #333333; /* Fundo escuro */
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #ffffff;
            text-align: center;
        }
        .container {
            background-color: #222222; /* Fundo do quiz */
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            max-width: 800px;
            width: 90%;
            border: 5px solid #4a4a4a;
        }
        h1 {
            color: #FFA000; /* Laranja de destaque */
            text-shadow: 1px 1px #000000;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        /* --- Tela Inicial e Final --- */
        #startScreen, #endScreen {
            padding: 20px;
        }
        #playerName {
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #555;
            width: 80%;
            max-width: 300px;
            font-size: 1.1em;
            text-align: center;
            margin-top: 10px;
            background-color: #444444;
            color: white;
        }
        #finalScore {
            font-size: 1.5em;
            margin: 20px 0;
            color: #4CAF50; /* Verde de sucesso */
        }

        /* --- √Årea da Pergunta --- */
        #progress {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #ffffff; /* Branco simples */
        }
        .question h3 {
            background-color: #444444;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.8em;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
        }

        /* --- Bot√µes de Op√ß√µes (Sem Formas Geom√©tricas) --- */
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Duas colunas */
            gap: 15px;
            margin-top: 20px;
        }
        .option-button {
            /* Design simples, cores Kahoot! */
            display: flex;
            align-items: center;
            justify-content: center; /* Centraliza o texto */
            padding: 20px;
            border-radius: 12px; /* Cantos arredondados, sem formas */
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            transition: background-color 0.2s, transform 0.1s;
            text-align: center;
            border: none;
            outline: none;
        }

        /* Cores Kahoot! simplificadas */
        .option-button:nth-child(1) { background-color: #E21B3C; } /* Vermelho */
        .option-button:nth-child(2) { background-color: #1368CE; } /* Azul */
        .option-button:nth-child(3) { background-color: #D89E00; } /* Amarelo */
        .option-button:nth-child(4) { background-color: #26890C; } /* Verde */
        
        /* Efeitos */
        .option-button:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .option-button.selected {
            border: 4px solid white;
            box-shadow: 0 0 20px 5px rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        /* --- Feedback e Bot√µes de A√ß√£o --- */
        #feedback {
            font-size: 1.5em;
            margin: 25px 0 10px 0;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        #feedback.show { opacity: 1; }
        .correct { color: #4CAF50; }
        .incorrect { color: #F44336; }

        .action-button, #startScreen button {
            background-color: #6a0dad; /* Cor de a√ß√£o (Roxo) */
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.3em;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .action-button:hover, #startScreen button:hover {
            background-color: #4a0072;
        }
        
        /* Estilo espec√≠fico para o bot√£o de limpar ranking */
        #clearRankingButton {
            background-color: #F44336; /* Vermelho para alerta/limpar */
            margin-left: 15px;
        }

        #clearRankingButton:hover {
            background-color: #D32F2F;
        }

        /* --- Ranking --- */
        #ranking {
            margin-top: 30px;
            text-align: center;
        }
        #ranking h2 {
            color: #FFA000;
            margin-bottom: 15px;
        }
        #rankingList {
            list-style: none;
            padding: 0;
        }
        #rankingList li {
            background-color: #444444;
            padding: 10px 20px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 1.1em;
            border-left: 5px solid #FFA000;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üí° Quiz: Efici√™ncia Energ√©tica! üí°</h1>
        <div id="startScreen">
            <p>Seja bem-vindo(a)! O quiz recompensa quem responde mais **r√°pido e correto**. ‚ö°</p>
            <p>Digite seu nome para come√ßar:</p>
            <input type="text" id="playerName" placeholder="Seu nome">
            <br><br>
            <button class="action-button" onclick="startQuiz()">Iniciar Quiz</button>
        </div>

        <div id="quizScreen" style="display:none;">
            <div id="progress"></div>
            <div id="questionContainer"></div>
            <div id="feedback"></div>
        </div>

        <div id="endScreen" style="display:none;">
            <h2>üèÜ Quiz Finalizado! üèÜ</h2>
            <p id="finalScore"></p>
            <div>
                <button class="action-button" onclick="window.location.reload()">Jogar Novamente</button>
                <button class="action-button" id="clearRankingButton" onclick="clearRanking()">Limpar Ranking</button>
            </div>
            <div id="ranking">
                <h2>Ranking Global:</h2>
                <ol id="rankingList"></ol>
            </div>
        </div>
    </div>

    <script>
        const allQuestions = [
            // Perguntas originais sobre Economia de Energia
            { question: "Qual √© a principal fonte de consumo de energia em escrit√≥rios?", options: ["Impressoras", "Ilumina√ß√£o", "Computadores", "Ar-condicionado"], answer: 3, points: 1000 },
            { question: "Qual pr√°tica ajuda a reduzir o consumo de energia com ilumina√ß√£o?", options: ["Usar l√¢mpadas incandescentes", "Manter luzes acesas o tempo todo", "Aproveitar luz natural", "Pintar as paredes de cores escuras"], answer: 2, points: 1000 },
            { question: "O que √© um equipamento com selo Procel?", options: ["Consome mais energia", "Tem garantia estendida", "Tem efici√™ncia energ√©tica comprovada", "√â importado"], answer: 2, points: 1000 },
            { question: "Qual atitude simples reduz o consumo dos computadores?", options: ["Deixar ligados √† noite", "Ativar modo de suspens√£o", "Aumentar brilho da tela", "Usar protetores de tela animados"], answer: 1, points: 1000 },
            { question: "Qual √© o hor√°rio de pico de energia no Brasil?", options: ["Madrugada", "Meio-dia", "Entre 18h e 21h", "Manh√£ cedo"], answer: 2, points: 1000 },
            { question: "Qual √© a forma mais eficiente de climatizar um escrit√≥rio?", options: ["Manter o ar-condicionado em 17¬∞C", "Regular a temperatura entre 23¬∞C e 25¬∞C", "Deixar janelas abertas com ar ligado", "Ligar e desligar v√°rias vezes"], answer: 1, points: 1000 },
            { question: "Como o monitor pode economizar energia?", options: ["Aumentando o brilho", "Desligando quando n√£o estiver em uso", "Deixando em stand-by o dia todo", "Usando fundo de tela claro"], answer: 1, points: 1000 },
            { question: "O que significa 'efici√™ncia energ√©tica'?", options: ["Usar menos energia para mesma tarefa", "Evitar usar eletr√¥nicos", "Reduzir o consumo total", "Aumentar pot√™ncia dos aparelhos"], answer: 0, points: 1000 },
            { question: "Por que desligar o computador no fim do expediente √© importante?", options: ["Evita superaquecimento", "Economiza energia", "Atualiza o sistema", "Gera relat√≥rios autom√°ticos"], answer: 1, points: 1000 },
            { question: "Qual tipo de l√¢mpada √© mais eficiente?", options: ["Incandescente", "Hal√≥gena", "Fluorescente", "LED"], answer: 3, points: 1000 },
            { question: "√â vantajoso usar tomadas inteligentes?", options: ["Sim, ajudam a cortar o consumo em stand-by", "N√£o, gastam mais energia", "Apenas em resid√™ncias", "S√≥ em aparelhos grandes"], answer: 0, points: 1000 },
            { question: "Qual o impacto de deixar equipamentos em stand-by?", options: ["Nenhum", "Consomem energia desnecess√°ria", "Prolongam a vida √∫til", "Aumentam a efici√™ncia"], answer: 1, points: 1000 },
            { question: "O que ajuda a reduzir o uso do ar-condicionado?", options: ["Fechar janelas", "Usar cortinas e ventila√ß√£o cruzada", "Aumentar a pot√™ncia", "Ligar ventiladores e ar juntos"], answer: 1, points: 1000 },
            { question: "Como o layout do escrit√≥rio pode influenciar o consumo de energia?", options: ["Organizando esta√ß√µes perto da luz natural", "Usando divis√≥rias escuras", "Afastando janelas", "Evitando refletores"], answer: 0, points: 1000 },
            { question: "Desligar monitores durante reuni√µes √© uma boa pr√°tica?", options: ["Sim, reduz consumo", "N√£o faz diferen√ßa", "Pode causar falhas", "Apenas se forem CRT"], answer: 0, points: 1000 },
            { question: "Qual medida reduz o gasto com impress√£o?", options: ["Imprimir em alta qualidade", "Usar papel reciclado", "Evitar impress√µes desnecess√°rias", "Manter impressora sempre ligada"], answer: 2, points: 1000 },
            { question: "Por que realizar manuten√ß√£o nos equipamentos el√©tricos?", options: ["Evita ru√≠dos", "Melhora efici√™ncia e reduz consumo", "Aumenta o tamanho do aparelho", "Torna mais bonito"], answer: 1, points: 1000 },
            { question: "O que √© o 'consumo fantasma'?", options: ["Energia usada por aparelhos desligados na tomada", "Uso de energia solar", "Falha de medi√ß√£o", "Perda por calor"], answer: 0, points: 1000 },
            { question: "Como economizar energia nos elevadores?", options: ["Usar escadas quando poss√≠vel", "Diminuir a velocidade", "Manter luz acesa o tempo todo", "Evitar manuten√ß√£o"], answer: 0, points: 1000 },
            { question: "Qual √© uma atitude coletiva eficaz para economizar energia?", options: ["Campanhas de conscientiza√ß√£o", "Deixar luzes acesas por seguran√ßa", "Evitar conversar sobre o tema", "Trocar l√¢mpadas com pouca frequ√™ncia"], answer: 0, points: 1000 }
        ];

        let questions = [];
        let currentQuestionIndex = 0;
        let totalScore = 0;
        let playerName = "";
        const RANKING_KEY = 'quizRankingDark'; // Chave para o localStorage
        let ranking = JSON.parse(localStorage.getItem(RANKING_KEY)) || []; 
        let questionActive = false;
        let questionStartTime;
        let totalTimeTaken = 0;

        function startQuiz() {
            playerName = document.getElementById("playerName").value.trim();
            if (playerName === "") {
                alert("Por favor, digite seu nome.");
                return;
            }

            // Escolher 12 perguntas aleat√≥rias
            questions = allQuestions.sort(() => 0.5 - Math.random()).slice(0, 12);

            document.getElementById("startScreen").style.display = "none";
            document.getElementById("quizScreen").style.display = "block";
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endQuiz();
                return;
            }
            
            questionActive = true;
            questionStartTime = new Date(); // Inicia a contagem de tempo para a pergunta atual
            
            const q = questions[currentQuestionIndex];
            const container = document.getElementById("questionContainer");
            
            document.getElementById("progress").textContent = `Pergunta ${currentQuestionIndex + 1} de ${questions.length}`;
            
            // Gerar bot√µes de op√ß√£o
            container.innerHTML = `
                <div class="question">
                    <h3>${q.question}</h3>
                </div>
                <div class="options">
                    ${q.options.map((opt, i) => 
                        `<button class="option-button" data-index="${i}" onclick="selectOption(${i}, this)">${opt}</button>`
                    ).join("")}
                </div>
            `;
            
            document.getElementById("feedback").textContent = "";
            document.getElementById("feedback").classList.remove("show", "correct", "incorrect");
        }

        function selectOption(selectedIndex, buttonElement) {
            if (!questionActive) return; // N√£o permite cliques ap√≥s a resposta

            questionActive = false; // Desativa a quest√£o ap√≥s a primeira sele√ß√£o
            
            // Calcula o tempo de resposta em segundos
            const timeTakenMs = new Date() - questionStartTime;
            const timeTakenSeconds = Math.round(timeTakenMs / 100) / 10; 
            totalTimeTaken += timeTakenMs; // Soma o tempo total

            // Remove a sele√ß√£o de todos
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
                btn.disabled = true; // Desabilita ap√≥s a escolha
            });

            // Adiciona o estilo de sele√ß√£o
            buttonElement.classList.add('selected');

            handleAnswer(selectedIndex, timeTakenSeconds);
        }

        function handleAnswer(selectedIndex, timeTakenSeconds) {
            const q = questions[currentQuestionIndex];
            const feedback = document.getElementById("feedback");
            const isCorrect = selectedIndex === q.answer;
            
            feedback.classList.add("show");
            
            // Revela a resposta correta visualmente (borda verde)
            const correctButton = document.querySelector(`.option-button[data-index="${q.answer}"]`);
            if(correctButton) {
                correctButton.style.border = "4px solid #4CAF50"; 
                correctButton.style.transform = "scale(1.05)";
            }

            if (isCorrect) {
                // Pontua√ß√£o por rapidez: Max 1500 pontos, Min 1000
                const timeFactor = Math.max(0, (20 - timeTakenSeconds) / 20); 
                const pointsGained = Math.round(q.points + (q.points * timeFactor * 0.5)); 
                
                totalScore += pointsGained;
                feedback.textContent = `‚úÖ Correto em ${timeTakenSeconds}s! (+${pointsGained} pontos)`;
                feedback.classList.add("correct");
            } else {
                feedback.textContent = `‚ùå Incorreto em ${timeTakenSeconds}s.`;
                feedback.classList.add("incorrect");
                
                // Marca o bot√£o selecionado incorretamente com borda vermelha
                const selectedButton = document.querySelector(`.option-button[data-index="${selectedIndex}"]`);
                if (selectedButton && selectedButton !== correctButton) {
                    selectedButton.style.border = "4px solid #F44336";
                }
            }

            // Pausa antes de ir para a pr√≥xima pergunta
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < questions.length) {
                    showQuestion();
                } else {
                    endQuiz();
                }
            }, 3000); // 3 segundos de feedback
        }

        function endQuiz() {
            document.getElementById("quizScreen").style.display = "none";
            document.getElementById("endScreen").style.display = "block";
            
            const totalTimeSeconds = Math.round(totalTimeTaken / 1000);
            document.getElementById("finalScore").textContent = `${playerName}, seu score final foi de ${totalScore} pontos. Seu tempo total foi de ${totalTimeSeconds} segundos.`;

            // Atualiza o ranking: Prioriza Score > Menor Tempo Total
            ranking.push({ name: playerName, score: totalScore, time: totalTimeSeconds });
            ranking.sort((a, b) => b.score - a.score || a.time - b.time); 
            
            localStorage.setItem(RANKING_KEY, JSON.stringify(ranking));

            updateRankingDisplay();
        }

        // Fun√ß√£o para atualizar a lista do ranking na tela
        function updateRankingDisplay() {
            const rankingList = document.getElementById("rankingList");
            if (ranking.length > 0) {
                rankingList.innerHTML = ranking.map((r, index) => 
                    `<li ${index < 3 ? 'style="font-size: 1.2em; font-weight: bold; border-left-color: gold;"' : ''}>
                        ${index + 1}¬∫. ${r.name} - ${r.score} pontos (${r.time}s)
                    </li>`
                ).join("");
            } else {
                 rankingList.innerHTML = "<li>Ningu√©m jogou ainda! Seja o primeiro!</li>";
            }
        }
        
        // --- NOVO: Fun√ß√£o para limpar o ranking ---
        function clearRanking() {
            if (confirm("Tem certeza que deseja limpar o Ranking? Esta a√ß√£o n√£o pode ser desfeita.")) {
                localStorage.removeItem(RANKING_KEY); // Remove o item do localStorage
                ranking = []; // Zera a vari√°vel local do ranking
                updateRankingDisplay(); // Atualiza a exibi√ß√£o na tela
                alert("Ranking limpo com sucesso!");
            }
        }

        // Exibe o ranking inicial ao carregar
        document.addEventListener('DOMContentLoaded', updateRankingDisplay);

    </script>
</body>
</html>